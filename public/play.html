<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Naming Game ‚Äî Play</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Spectator banner */
    #spectatorBanner.hidden { display: none !important; }
    #spectatorBanner{
      margin-top:12px;
      padding:10px 12px;
      border-radius:10px;
      background: linear-gradient(0deg, rgba(14,165,233,.10), rgba(14,165,233,.10)), var(--panel);
      border:1px solid var(--accent);
      color: var(--text);
      font-weight: 600;
    }
    /* Mini-game panel */
    #miniGamePanel.hidden { display:none !important; }
    #miniGamePanel{
      margin-top:12px; padding:12px;
      border-radius:12px; border:1px solid var(--border);
      background:var(--panel);
    }
    #mgHeader{ display:flex; justify-content:space-between; align-items:center; gap:8px; }
    #mgPrompt{ font-weight:700; margin:10px 0; }
    #mgOptions{ display:grid; gap:8px; grid-template-columns:1fr; }
    @media (min-width: 640px){ #mgOptions{ grid-template-columns:1fr 1fr; } }
    #mgStatus{ display:flex; gap:12px; color:var(--muted); margin-top:8px; }
    /* Simple responsive columns */
    .columns{ display:grid; gap:12px; grid-template-columns: 1fr; }
    @media (min-width: 900px){ .columns{ grid-template-columns: 1.1fr 1.9fr; } }
    /* Search/matchmaking box */
    #searchBox.hidden{ display:none !important; }
    #searchBox{
      margin-top:12px; padding:12px;
      border:1px dashed var(--border);
      border-radius:10px; background:#0b1220;
      color:#cbd5e1;
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="row" style="justify-content:space-between;">
      <div class="row" style="gap:12px; align-items:center;">
        <strong id="playerName">‚Äî</strong>
        <span class="muted">|</span>
        <span>Mode: <strong id="modeLabel">‚Äî</strong></span>
        <span class="muted">|</span>
        <span>Topic: <strong id="topicLabel">‚Äî</strong></span>
        <span class="muted">|</span>
        <span>Per-turn: <strong id="perTurnLabel">‚Äî</strong>s</span>
      </div>
      <div>
        <button id="btnLeave" class="secondary">Leave Game</button>
      </div>
    </header>

    <section class="card">
      <!-- Room code (private or quick match) -->
      <div id="roomCodeWrap" class="hidden">
        <div>Room code:</div>
        <div id="roomCodeLabel"></div>
      </div>

      <!-- Spectator banner -->
      <div id="spectatorBanner" class="hidden">üëÄ You are eliminated ‚Äî spectating‚Ä¶</div>

      <!-- Spectator mini-game launcher -->
      <div class="row" id="spectatorActions" style="gap:8px; margin-top:8px;">
        <button id="btnStartMini" class="secondary hidden">üïπÔ∏è Play trivia while you wait</button>
        <button id="btnStopMini" class="secondary hidden">‚úã Stop mini‚Äëgame</button>
      </div>

      <!-- Quick match searching / join progress -->
      <div id="searchBox" class="hidden">
        <div id="searchMsg">Searching‚Ä¶</div>
        <div class="row" style="margin-top:8px;">
          <button id="btnCancel" class="secondary">Cancel</button>
        </div>
      </div>

      <!-- Layout -->
      <div class="columns" style="margin-top:12px;">
        <!-- Left column: players + host controls (lobby only) -->
        <div>
          <h3 style="margin:0 0 6px 0;">Players</h3>
          <ul id="players"></ul>

          <!-- Host-only panel in PRIVATE rooms (lobby state) -->
          <div id="hostPanel" class="card hidden" style="margin-top:12px;">
            <h3 style="margin:0 0 8px 0;">Host Controls</h3>
            <label>Per turn (seconds)</label>
            <input id="perTurnInput" type="number" min="5" max="120" value="15" />
            <label style="margin-top:8px;">Topic</label>
            <select id="hostTopic">
              <option value="countries">Countries</option>
              <option value="capitals">Capitals</option>
              <option value="currencies">Currencies</option>
              <option value="dog_breeds">Dog Breeds</option>
              <option value="pokemon_gen1">Pok√©mon (Gen 1)</option>
              <option value="elements">Chemical Elements</option>
              <option value="oscars_best_picture">Best Picture Winners</option>
              <option value="car_brands">Car Brands</option>
            </select>
            <div class="row" style="gap:8px; margin-top:10px;">
              <button id="btnStart" class="primary">Start Game</button>
              <button id="btnReset" class="secondary">Reset to Lobby</button>
            </div>
          </div>
        </div>

        <!-- Right column: gameplay -->
        <div>
          <div class="row" style="justify-content:space-between;">
            <div>Current: <strong id="currentName">‚Äî</strong></div>
            <div>Time: <strong id="timer">‚Äî</strong></div>
          </div>

          <!-- The answer form disables browser autocomplete/remembered values -->
          <form id="answerForm" autocomplete="off" novalidate>
            <label style="margin-top:8px;">Your answer</label>
            <div class="row" style="gap:8px;">
              <input
                id="answerInput"
                type="text"
                placeholder="Type an answer‚Ä¶"
                autocomplete="off"
                autocapitalize="off"
                autocorrect="off"
                spellcheck="false"
                aria-autocomplete="none"
                inputmode="text"
                data-lpignore="true" />
              <button id="btnSubmit" class="primary" type="submit">Submit</button>
            </div>
            <input type="text" style="display:none" tabindex="-1" aria-hidden="true" autocomplete="off">
          </form>

          <div id="answerHint" class="hint" style="margin-top:6px; min-height:18px;"></div>

          <h3 style="margin:16px 0 6px 0;">Used</h3>
          <div id="usedList"></div>

          <!-- Mini-game panel (appears when spectator chooses to play) -->
          <div id="miniGamePanel" class="hidden">
            <div id="mgHeader">
              <div><strong>Trivia while you wait</strong> ‚Äî <span id="mgTopicLabel"></span></div>
              <div id="mgStatus">
                <span id="mgScoreLabel">Score: 0</span>
                <span id="mgRemainingLabel">Remaining: ‚Äî</span>
              </div>
            </div>

            <div id="mgPrompt"></div>

            <!-- For MC/TF options -->
            <div id="mgOptions"></div>

            <!-- For text answers (codes/symbols) -->
            <div id="mgTextWrap" class="row" style="gap:8px; margin-top:8px;">
              <input id="mgTextInput" type="text" placeholder="Type your answer‚Ä¶" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
              <button id="mgSubmit" class="secondary" type="button">Submit</button>
            </div>

            <div class="row" style="gap:8px; margin-top:8px;">
              <button id="mgNext" class="secondary" type="button">Next</button>
              <button id="mgSkip" class="secondary" type="button">Skip</button>
            </div>

            <div id="mgHint" class="hint" style="margin-top:8px; min-height:18px;"></div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Results overlay -->
  <div id="resultOverlay" class="hidden">
    <div class="panel">
      <h2 id="resultTitle">Results</h2>
      <div id="scoreboard" style="margin-top:8px;"></div>
      <div class="row" style="gap:8px; margin-top:12px;">
        <button id="btnPlayAgain" class="primary">Play Again</button>
        <button id="btnReturnLobby" class="secondary hidden">Return to Lobby</button>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="js/nav.js"></script>
  <script src="js/game.js"></script>
</body>
</html>
